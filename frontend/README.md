# Project Noah MVP - Frontend Application Setup Guide

This guide details the setup for the React+TypeScript frontend application for Project Noah MVP. It is built using Vite for optimal development speed and adheres to the project's principles of radical simplification and maximum velocity for MVP delivery.

## 1. Core Technologies

*   **Framework:** React (v18+) with TypeScript (`React_TypeScript_Primary_Choice_N0`)
*   **Build Tool:** Vite
*   **UI Component Library:** Mantine UI (`@mantine/core`, `@mantine/hooks`, `@mantine/notifications`)
    *   **Rationale (`dynamous.ai` MVP UI Advisory):** Mantine UI is selected for its comprehensive, accessible components, strong TypeScript support, and theming capabilities, enabling rapid, high-quality UI development for the MVP. This aligns with `CODE_VELOCITY_AND_QUALITY_MVP`.
*   **Routing:** `react-router-dom` (v6)
*   **API Communication:** `axios`
*   **State Management (MVP):** React Context API (with `useReducer` if complex state arises).
    *   **Rationale (`dynamous.ai` MVP State Management Advisory):** Chosen for its simplicity and being built into React, avoiding additional library overhead for MVP's initial global state needs. If state complexity grows significantly, this will be re-evaluated with the AEM-Architect.
*   **Code Quality:** ESLint & Prettier

## 2. Initial Project Setup Instructions

These steps are to be performed by a human engineer.

1.  **Create the Vite Project:**
    Navigate to the root directory of the `Noah.Genesis` repository in your terminal and run:
    ```bash
    npm create vite@latest frontend -- --template react-ts
    ```
    (Alternatively, use `yarn create vite frontend --template react-ts` or `pnpm create vite frontend --template react-ts`)
    This command initializes a new React + TypeScript project in a directory named `frontend`.

2.  **Navigate into the Project Directory:**
    ```bash
    cd frontend
    ```

3.  **Install Core Dependencies:**
    Run the following command inside the `frontend` directory:
    ```bash
    npm install axios react-router-dom@6 @mantine/core @mantine/hooks @mantine/notifications
    ```
    (For yarn: `yarn add axios react-router-dom@6 @mantine/core @mantine/hooks @mantine/notifications`)
    (For pnpm: `pnpm add axios react-router-dom@6 @mantine/core @mantine/hooks @mantine/notifications`)

4.  **Install Development Dependencies:**
    These are for code quality and formatting.
    ```bash
    npm install --save-dev prettier eslint-config-prettier eslint-plugin-prettier
    ```
    (For yarn: `yarn add --dev prettier eslint-config-prettier eslint-plugin-prettier`)
    (For pnpm: `pnpm add --dev prettier eslint-config-prettier eslint-plugin-prettier`)
    *Note: Vite's `react-ts` template usually includes a basic ESLint setup. These commands add Prettier and its ESLint integration.*

## 3. Mandated Project Structure

After initializing with Vite and organizing your source files, the `frontend/src/` directory should adhere to the following structure:

*   `frontend/public/`: Static assets directly served (e.g., `favicon.ico`). (Generated by Vite)
*   `frontend/src/`: Main application source code.
    *   `assets/`: For static assets like images, custom fonts, etc., that are imported into components.
    *   `components/`: Reusable UI components (e.g., `ChatInput.tsx`, `MessageBubble.tsx`).
        *   `common/`: Sub-directory for highly generic, shared components across different features.
    *   `contexts/`: For React Context API providers and consumer hooks (e.g., `AuthContext.tsx`, `ThemeContext.tsx`).
    *   `hooks/`: Custom React hooks (e.g., `useAuth.ts`, `useFormValidation.ts`).
    *   `pages/`: Top-level components representing different application views/routes (e.g., `ChatPage.tsx`, `LoginPage.tsx`, `UserProfilePage.tsx`).
    *   `services/`: Modules for abstracting API calls to the backend (e.g., `apiClient.ts` using Axios, `chatService.ts`).
    *   `styles/`: Global stylesheets and theme configurations.
        *   `global.css`: For truly global CSS resets or base styles (if not fully handled by Mantine's global styles).
        *   `theme.ts`: Mantine theme customization object.
    *   `utils/`: General utility functions not specific to a component or hook (e.g., `dateFormatter.ts`).
    *   `App.tsx`: The main application component, typically setting up routing and global providers. (Generated by Vite, to be modified)
    *   `main.tsx`: The application entry point; renders the root `App` component and sets up global providers like `MantineProvider`. (Generated by Vite, to be modified)
    *   `vite-env.d.ts`: TypeScript declarations for Vite environment variables. (Generated by Vite)
*   `frontend/index.html`: The main HTML entry point for the SPA. (Generated by Vite)
*   `frontend/vite.config.ts`: Vite build and development server configuration. (Generated by Vite)
*   `frontend/tsconfig.json`: TypeScript compiler options for the application code. (Generated by Vite, to be modified for paths)
*   `frontend/tsconfig.node.json`: TypeScript compiler options for Vite/Node.js related configuration files. (Generated by Vite)

## 4. Integrating Mantine UI

To use Mantine components and styles throughout your application, you need to wrap your root component with `MantineProvider`.

**Modify `frontend/src/main.tsx`:**

```tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import { MantineProvider, ColorSchemeScript } from '@mantine/core'; // Import ColorSchemeScript for Next 13+ App Router if ever migrating, not strictly needed for Vite CSR. For Vite, MantineProvider is key.
import { Notifications } from '@mantine/notifications'; // For Mantine notifications

// Core Mantine styles are imported here
import '@mantine/core/styles.css';
// Mantine notifications styles
import '@mantine/notifications/styles.css';
// Example: If you have other Mantine packages like @mantine/dates, import their styles too:
// import '@mantine/dates/styles.css';

import App from './App'; // Your main application component
// import './styles/global.css'; // Your custom global styles, if any

// Optional: Define your custom theme (can be in src/styles/theme.ts)
// const myTheme = {
//   colorScheme: 'light',
//   primaryColor: 'brand', // Ensure 'brand' is defined in your colors
//   colors: {
//     brand: ['#E9F7FF', /* ... other shades */ '#005C9E'],
//   },
//   // ... other theme properties
// };

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    {/* <ColorSchemeScript defaultColorScheme="auto" /> */ /* Primarily for SSR frameworks to prevent FOUC on theme changes */}
    <MantineProvider
      // theme={myTheme} // Uncomment to use your custom theme
      withGlobalStyles // Applies NormalizeCSS and some basic global Mantine styles
      withNormalizeCSS // Applies NormalizeCSS
    >
      <Notifications position="top-right" /> {/* Setup for notifications system wide */}
      <App />
    </MantineProvider>
  </React.StrictMode>
);
```
*Create a `frontend/src/styles/theme.ts` to define your custom Mantine theme object and import it for a cleaner `main.tsx`.*

## 5. `package.json` Scripts

Vite generates the following scripts in your `frontend/package.json`:
*   `"dev"`: Starts the development server (e.g., `vite`).
*   `"build"`: Builds the application for production (e.g., `tsc && vite build`).
*   `"lint"`: Runs the linter (e.g., `eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0`).
*   `"preview"`: Serves the production build locally for preview.

It's recommended to add a formatting script:
```json
// Add to "scripts" in package.json
"format": "prettier --write \"src/**/*.{ts,tsx,css,md,json}\" --config ./.prettierrc.json"
```

## 6. Code Quality Configuration Files

*   **`frontend/.eslintrc.cjs`:** This file configures ESLint for static code analysis and enforcing coding standards. The generated content for this file ensures integration with TypeScript, React, React Hooks, and Prettier.
*   **`frontend/.prettierrc.json`:** This file configures Prettier for consistent code formatting.

(Content for these files will be provided separately by AEM-Engineer_Noah_MVP_Builder_v1.0 for you to create.)

## 7. TypeScript Configuration for Absolute Imports

To use absolute imports (e.g., `@components/Button`) from your `src` directory, modify your `frontend/tsconfig.json`:

Add/update the `compilerOptions` section:
```json
// Inside "compilerOptions" in frontend/tsconfig.json:
"baseUrl": "src", // Sets the base directory for module resolution to 'src/'
"paths": {
  "@components/*": ["components/*"],
  "@pages/*": ["pages/*"],
  "@services/*": ["services/*"],
  "@hooks/*": ["hooks/*"],
  "@contexts/*": ["contexts/*"],
  "@styles/*": ["styles/*"],
  "@assets/*": ["assets/*"],
  "@utils/*": ["utils/*"]
  // Define other aliases as your project structure evolves
}
```
After updating `tsconfig.json`, you might need to restart your Vite development server for these path aliases to take effect. Also, ensure `vite.config.ts` is configured to resolve these aliases if not handled automatically (Vite often uses `vite-tsconfig-paths` plugin or similar for this, or you can add an alias config to Vite directly). For a basic Vite setup, often `baseUrl` in `tsconfig.json` is sufficient if `vite.config.ts` doesn't override it.

This setup establishes a robust foundation for developing the Project Noah MVP frontend with velocity and quality.
