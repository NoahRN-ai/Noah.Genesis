# Noah AI Report Structure (MVP) - Sections I, II, III

This directory contains the MVP definition for the data structures and mock data generation logic for the first three sections of the AI-Powered Shift Report. It also includes conceptual UI blueprints for how this information might be displayed.

## File Index

1.  **`report_data_generator.py`**
    *   **Purpose:** This Python script is responsible for generating mock data that would populate Sections I, II, and III of the AI shift report.
    *   **Functionality:**
        *   **Mock Data Access:**
            *   `get_mock_patient_profile(patient_id)`: Simulates fetching patient demographic and core data (like that from Firestore).
            *   `get_mock_firestore_data(patient_id, data_key)`: Simulates fetching specific text-based data like "About Me" or "Our Goals" from Firestore.
        *   **RAG Placeholder:**
            *   `fetch_patient_history_summary_from_rag(patient_id)`: Simulates a call to a Retrieval Augmented Generation (RAG) system (conceptually linking to the `patient_summary_agent.py`'s RAG component) to fetch summarized past medical and surgical history.
        *   **Section Data Population:**
            *   `populate_section_i_system_overview()`: Generates data for unit-wide information like shift details, nurse assignments, census, and urgent alerts.
            *   `populate_section_ii_patient_identification(patient_id)`: Gathers and structures patient-specific identification data like name, MRN, DOB, allergies, code status, admission details, etc.
            *   `populate_section_iii_patient_history(patient_id)`: Compiles patient history, including PMH/PSH from the RAG simulation, and editable fields like "About Me" and "Our Goals" from mock Firestore data.
            *   `populate_section_v_systems_assessment(patient_id)`: This is the main function for Section V. It calls numerous sub-functions (`populate_neuro_assessment`, `populate_pulmonary_assessment`, etc.) to gather mock data for each physiological system. It returns a dictionary where keys are system names (e.g., "neurological") and values are the detailed assessment dictionaries for that system.
        *   **Input Handling Placeholder:**
            *   `save_to_firestore(patient_id, data_key, content)`: Simulates saving user-inputted content (e.g., for "About Me") back to Firestore. It currently prints the data that would be saved and updates the in-memory mock store for demonstration.
    *   **Usage:** The `if __name__ == "__main__":` block demonstrates how to call these functions to generate data for mock patients, including the new Section V, and simulate saving user input.

2.  **`section_i_overview_ui.md`**
    *   **Purpose:** A markdown file outlining a conceptual HTML-like structure for displaying Section I (System & Unit Overview) data.
    *   **Content:** Shows where data elements generated by `populate_section_i_system_overview()` (e.g., `current_date_time`, `shift_info`, `unit_census_overview`) would be placed in a UI.

3.  **`section_ii_identification_ui.md`**
    *   **Purpose:** A markdown file outlining a conceptual HTML-like structure for Section II (Patient Identification).
    *   **Content:** Illustrates how patient-specific data from `populate_section_ii_patient_identification()` (e.g., `room_no`, `patient_name_dob_mrn`, `allergies`) would be displayed, typically within a patient card or profile view.

4.  **`section_iii_history_ui.md`**
    *   **Purpose:** A markdown file outlining a conceptual HTML-like structure for Section III (Patient History & Context).
    *   **Content:** Shows the layout for displaying data from `populate_section_iii_patient_history()` (e.g., `relevant_past_medical_history`, `about_me`). Importantly, it also includes conceptual UI elements for editing fields like "About Me" and "Our Goals", suggesting how users might interact with these components.

5.  **`section_v_systems_assessment_ui.md`**
    *   **Purpose:** A markdown file outlining a conceptual HTML-like structure for Section V (Core Systems Assessment).
    *   **Content:** This extensive file provides UI blueprints for each physiological system (Neurological, Pulmonary, Cardiovascular, GI, GU, Skin/Mobility, IV Access, Fluids/Infusions, Pain, Laboratory/Diagnostics). For each sub-system, it details:
        *   Where data from the corresponding `populate_..._assessment()` function in `report_data_generator.py` would be displayed (using `{{ placeholder }}` syntax).
        *   A distinction between fields intended for display of mock/manual data (e.g., `<span class="data-display">{{ ... }}</span>`) and fields that would serve as simple manual input areas in an MVP (e.g., `<input type="text" value="{{ ... }}">`, `<textarea>{{ ... }}</textarea>`).
        *   Notes on conceptual placeholders for richer UI elements (e.g., "Interactive Digital Body Map" for skin assessment).

## How the System Works (Conceptually)

1.  The `report_data_generator.py` script acts as a backend data provider for the UI.
2.  It fetches and consolidates data from various (simulated) sources:
    *   Patient profiles (mock Firestore).
    *   Specific patient narratives like "About Me" (mock Firestore).
    *   Summarized history (mock RAG system).
3.  This data is then structured according to the needs of each report section (I, II, III).
4.  The `.md` files serve as blueprints for front-end developers, showing how this structured data should be presented to the user and where user inputs can be incorporated.
5.  User inputs (e.g., updating "Our Goals") are conceptually sent back to a service that would use functions like `save_to_firestore` to persist the changes.

## Important Notes

*   **Simulations:**
    *   **Data Sources:** All data fetching (Firestore, RAG) is simulated using hardcoded Python dictionaries or simple functions. No actual database or AI services are called.
    *   **Data Storage:** The `save_to_firestore` function only prints data and updates an in-memory mock store. It does not interact with a real Firestore database.
*   **UI Blueprints:** The `.md` files are **not** functional UI code. They are HTML-like outlines intended to guide UI development. They use `{{ placeholder }}` syntax to indicate where dynamic data would be injected.
*   **MVP Focus:** This MVP focuses on defining the data flow and structure for these initial report sections. Further development would involve building actual UI components and integrating with real backend services.
